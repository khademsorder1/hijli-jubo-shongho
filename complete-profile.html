<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>প্রোফাইল সম্পূর্ণ করুন - হিজলী দিঘাপাড়া যুব সংঘ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #16a085;
            --primary-dark: #138d75;
            --secondary: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --gray: #95a5a6;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --radius: 15px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hind Siliguri', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: var(--dark);
        }
        
        .profile-container {
            width: 100%;
            max-width: 900px;
            background: var(--white);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            animation: fadeIn 0.8s ease;
        }
        
        .profile-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 30px;
            text-align: center;
        }
        
        .profile-header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .profile-header p {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .profile-progress {
            margin-top: 20px;
        }
        
        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--secondary);
            border-radius: 4px;
            transition: var(--transition);
            width: 0%;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .profile-body {
            padding: 30px;
        }
        
        .form-tabs {
            display: flex;
            background: var(--light);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .form-tab {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            font-family: 'Hind Siliguri', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--gray);
            cursor: pointer;
            border-radius: 8px;
            transition: var(--transition);
            min-width: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .form-tab.active {
            background: var(--white);
            color: var(--primary);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .section-title {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group label.required::after {
            content: '*';
            color: var(--danger);
            margin-left: 4px;
        }
        
        .form-control {
            width: 100%;
            padding: 14px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Hind Siliguri', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(22, 160, 133, 0.1);
        }
        
        .phone-input {
            display: flex;
        }
        
        .phone-input .prefix {
            padding: 14px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-right: none;
            border-radius: 10px 0 0 10px;
            font-weight: 600;
        }
        
        .phone-input input {
            border-radius: 0 10px 10px 0;
        }
        
        .input-hint {
            display: block;
            margin-top: 5px;
            color: var(--gray);
            font-size: 0.85rem;
        }
        
        .input-error {
            display: block;
            margin-top: 5px;
            color: var(--danger);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .photo-upload {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .photo-preview {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 20px;
            position: relative;
            border: 4px solid var(--primary);
            overflow: hidden;
            cursor: pointer;
            background: #f8f9fa;
        }
        
        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: var(--transition);
        }
        
        .photo-preview:hover .photo-overlay {
            opacity: 1;
        }
        
        .file-input {
            display: none;
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-family: 'Hind Siliguri', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
        }
        
        .btn-success {
            background: var(--secondary);
            color: var(--white);
        }
        
        .btn-block {
            width: 100%;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            box-shadow: var(--shadow);
            z-index: 1000;
            animation: slideInRight 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.success {
            background: var(--secondary);
        }
        
        .notification.error {
            background: var(--danger);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @media (max-width: 768px) {
            .profile-container {
                margin: 20px;
            }
            
            .profile-header {
                padding: 20px;
            }
            
            .profile-header h1 {
                font-size: 1.5rem;
            }
            
            .profile-body {
                padding: 20px;
            }
            
            .form-tabs {
                flex-direction: column;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
        }
        
        /* Custom select styling */
        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%232c3e50' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
            padding-right: 40px;
        }
        
        /* Custom file upload button */
        .file-upload-btn {
            background: var(--light);
            color: var(--dark);
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }
        
        .file-upload-btn:hover {
            background: #e9ecef;
        }
    </style>
</head>
<body>
    <div class="profile-container animate__animated animate__fadeIn">
        <!-- Header Section -->
        <div class="profile-header">
            <h1><i class="fas fa-user-circle"></i> প্রোফাইল সম্পূর্ণ করুন</h1>
            <p>হিজলী দিঘাপাড়া যুব সংঘের পূর্ণাঙ্গ সদস্য হতে আপনার তথ্য দিন</p>
            
            <div class="profile-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text">
                    <span>প্রোফাইল কমপ্লিট</span>
                    <span id="progressPercentage">0%</span>
                </div>
            </div>
        </div>
        
        <!-- Body Section -->
        <div class="profile-body">
            <!-- Navigation Tabs -->
            <div class="form-tabs">
                <button class="form-tab active" data-tab="basic">
                    <i class="fas fa-user"></i> প্রাথমিক তথ্য
                </button>
                <button class="form-tab" data-tab="contact">
                    <i class="fas fa-address-book"></i> যোগাযোগ তথ্য
                </button>
                <button class="form-tab" data-tab="health">
                    <i class="fas fa-heartbeat"></i> স্বাস্থ্য তথ্য
                </button>
                <button class="form-tab" data-tab="skills">
                    <i class="fas fa-tools"></i> দক্ষতা ও আগ্রহ
                </button>
                <button class="form-tab" data-tab="emergency">
                    <i class="fas fa-phone-alt"></i> জরুরী যোগাযোগ
                </button>
            </div>
            
            <!-- Photo Upload Section -->
            <div class="photo-upload">
                <div class="photo-preview" id="photoPreview">
                    <img id="previewImage" src="" alt="Profile Preview">
                    <div class="photo-overlay">
                        <i class="fas fa-camera fa-2x"></i>
                        <small>ছবি পরিবর্তন</small>
                    </div>
                </div>
                <input type="file" id="profilePhoto" class="file-input" accept="image/*">
                <label for="profilePhoto" class="file-upload-btn">
                    <i class="fas fa-upload"></i> প্রোফাইল ছবি আপলোড করুন
                </label>
                <p class="input-hint">ছবির সাইজ: 500x500 পিক্সেল, ফরম্যাট: JPG/PNG (সর্বোচ্চ 2MB)</p>
            </div>
            
            <!-- Basic Information Tab -->
            <form id="profileForm">
                <div id="basic" class="tab-content active">
                    <h3 class="section-title"><i class="fas fa-id-card"></i> ব্যক্তিগত তথ্য</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="fullName" class="required">
                                <i class="fas fa-signature"></i> পুরো নাম (বাংলায়)
                            </label>
                            <input type="text" id="fullName" class="form-control" placeholder="আপনার পূর্ণ নাম বাংলায় লিখুন" required>
                            <span class="input-hint">যেমন: আব্দুল করিম মিয়া</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="nickname">
                                <i class="fas fa-user-tag"></i> ডাক নাম (ঐচ্ছিক)
                            </label>
                            <input type="text" id="nickname" class="form-control" placeholder="সকলের কাছে পরিচিত নাম">
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="fatherName" class="required">
                                <i class="fas fa-male"></i> পিতার নাম
                            </label>
                            <input type="text" id="fatherName" class="form-control" placeholder="পিতার পূর্ণ নাম" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="motherName" class="required">
                                <i class="fas fa-female"></i> মাতার নাম
                            </label>
                            <input type="text" id="motherName" class="form-control" placeholder="মাতার পূর্ণ নাম" required>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="dob" class="required">
                                <i class="fas fa-birthday-cake"></i> জন্ম তারিখ
                            </label>
                            <input type="date" id="dob" class="form-control" required>
                            <span class="input-hint">সদস্য হতে বয়স কমপক্ষে ১৮ বছর হতে হবে</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="birthPlace">
                                <i class="fas fa-map-marker-alt"></i> জন্মস্থান
                            </label>
                            <input type="text" id="birthPlace" class="form-control" placeholder="জন্মের গ্রাম/শহর">
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nid" class="required">
                                <i class="fas fa-id-card-alt"></i> NID নম্বর
                            </label>
                            <input type="text" id="nid" class="form-control" placeholder="জাতীয় পরিচয়পত্র নম্বর" required maxlength="17">
                            <span class="input-hint">১৩ বা ১৭ ডিজিটের NID নম্বর</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="gender" class="required">
                                <i class="fas fa-venus-mars"></i> লিঙ্গ
                            </label>
                            <select id="gender" class="form-control" required>
                                <option value="">-- নির্বাচন করুন --</option>
                                <option value="male">পুরুষ</option>
                                <option value="female">মহিলা</option>
                                <option value="other">অন্যান্য</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Contact Information Tab -->
                <div id="contact" class="tab-content">
                    <h3 class="section-title"><i class="fas fa-phone"></i> যোগাযোগের তথ্য</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="mobile1" class="required">
                                <i class="fas fa-mobile-alt"></i> প্রাথমিক মোবাইল নম্বর
                            </label>
                            <div class="phone-input">
                                <span class="prefix">+880</span>
                                <input type="tel" id="mobile1" class="form-control" placeholder="1XXXXXXXXX" maxlength="10" required>
                            </div>
                            <span class="input-hint">অবশ্যই 01 দিয়ে শুরু করতে হবে (11 ডিজিট)</span>
                            <div class="input-error" id="mobile1Error" style="display: none;">
                                <i class="fas fa-exclamation-circle"></i> সঠিক ফোন নম্বর দিন
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="mobile2">
                                <i class="fas fa-mobile-alt"></i> বিকল্প মোবাইল নম্বর
                            </label>
                            <div class="phone-input">
                                <span class="prefix">+880</span>
                                <input type="tel" id="mobile2" class="form-control" placeholder="1XXXXXXXXX" maxlength="10">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="email">
                                <i class="fas fa-envelope"></i> ইমেইল ঠিকানা
                            </label>
                            <input type="email" id="email" class="form-control" placeholder="example@gmail.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="facebook">
                                <i class="fab fa-facebook"></i> ফেসবুক প্রোফাইল
                            </label>
                            <input type="url" id="facebook" class="form-control" placeholder="https://facebook.com/username">
                        </div>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-home"></i> স্থায়ী ঠিকানা
                    </h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="village" class="required">
                                <i class="fas fa-home"></i> গ্রাম/মহল্লা
                            </label>
                            <input type="text" id="village" class="form-control" placeholder="গ্রাম/মহল্লার নাম" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="postOffice" class="required">
                                <i class="fas fa-mail-bulk"></i> ডাকঘর
                            </label>
                            <input type="text" id="postOffice" class="form-control" placeholder="ডাকঘরের নাম" required>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="upazila" class="required">
                                <i class="fas fa-map"></i> উপজেলা
                            </label>
                            <input type="text" id="upazila" class="form-control" placeholder="উপজেলার নাম" value="বাগাতিপাড়া" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="district" class="required">
                                <i class="fas fa-map-marked-alt"></i> জেলা
                            </label>
                            <input type="text" id="district" class="form-control" placeholder="জেলার নাম" value="নাটোর" required>
                        </div>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-building"></i> বর্তমান ঠিকানা (যদি ভিন্ন হয়)
                    </h3>
                    
                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="sameAsPermanent">
                            <label for="sameAsPermanent">স্থায়ী ঠিকানা বর্তমান ঠিকানা হিসাবে ব্যবহার করছি</label>
                        </div>
                    </div>
                    
                    <div id="currentAddressSection">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="currentVillage">
                                    <i class="fas fa-home"></i> বর্তমান গ্রাম/মহল্লা
                                </label>
                                <input type="text" id="currentVillage" class="form-control" placeholder="বর্তমান ঠিকানা">
                            </div>
                            
                            <div class="form-group">
                                <label for="currentDistrict">
                                    <i class="fas fa-map-marked-alt"></i> বর্তমান জেলা
                                </label>
                                <input type="text" id="currentDistrict" class="form-control" placeholder="বর্তমান জেলা">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Health Information Tab -->
                <div id="health" class="tab-content">
                    <h3 class="section-title"><i class="fas fa-heart"></i> স্বাস্থ্য তথ্য</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="bloodGroup" class="required">
                                <i class="fas fa-tint"></i> রক্তের গ্রুপ
                            </label>
                            <select id="bloodGroup" class="form-control" required>
                                <option value="">-- নির্বাচন করুন --</option>
                                <option value="A+">A+ (A Positive)</option>
                                <option value="A-">A- (A Negative)</option>
                                <option value="B+">B+ (B Positive)</option>
                                <option value="B-">B- (B Negative)</option>
                                <option value="O+">O+ (O Positive)</option>
                                <option value="O-">O- (O Negative)</option>
                                <option value="AB+">AB+ (AB Positive)</option>
                                <option value="AB-">AB- (AB Negative)</option>
                                <option value="unknown">জানি না</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="height">
                                <i class="fas fa-ruler-vertical"></i> উচ্চতা (সেমি)
                            </label>
                            <input type="number" id="height" class="form-control" placeholder="সেন্টিমিটারে" min="100" max="250">
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="weight">
                                <i class="fas fa-weight"></i> ওজন (কেজি)
                            </label>
                            <input type="number" id="weight" class="form-control" placeholder="কিলোগ্রামে" min="30" max="200">
                        </div>
                        
                        <div class="form-group">
                            <label for="disability">
                                <i class="fas fa-wheelchair"></i> শারীরিক প্রতিবন্ধকতা
                            </label>
                            <select id="disability" class="form-control">
                                <option value="none">কোনো নেই</option>
                                <option value="visual">দৃষ্টি প্রতিবন্ধী</option>
                                <option value="hearing">শ্রবণ প্রতিবন্ধী</option>
                                <option value="physical">শারীরিক প্রতিবন্ধী</option>
                                <option value="intellectual">বুদ্ধি প্রতিবন্ধী</option>
                                <option value="other">অন্যান্য</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <i class="fas fa-file-medical"></i> স্বাস্থ্য সমস্যা (যদি থাকে)
                        </label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="healthDiabetes" value="diabetes">
                                <label for="healthDiabetes">ডায়াবেটিস</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="healthHeart" value="heart">
                                <label for="healthHeart">হৃদরোগ</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="healthPressure" value="pressure">
                                <label for="healthPressure">উচ্চ রক্তচাপ</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="healthAsthma" value="asthma">
                                <label for="healthAsthma">হাঁপানি/অ্যাজমা</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="healthKidney" value="kidney">
                                <label for="healthKidney">কিডনি সমস্যা</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="healthOther">
                                <input type="text" id="healthOtherText" class="form-control" placeholder="অন্যান্য স্বাস্থ্য সমস্যা" style="margin-left: 10px; width: 200px;">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <i class="fas fa-heartbeat"></i> রক্তদান সম্পর্কিত তথ্য
                        </label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="bloodDonorYes" name="bloodDonor" value="yes" checked>
                                <label for="bloodDonorYes">হ্যাঁ, রক্তদানে ইচ্ছুক</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="bloodDonorNo" name="bloodDonor" value="no">
                                <label for="bloodDonorNo">না, রক্তদানে ইচ্ছুক নই</label>
                            </div>
                        </div>
                    </div>
                    
                    <div id="bloodDonorInfo">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="lastDonation">
                                    <i class="fas fa-calendar-check"></i> শেষ রক্তদানের তারিখ
                                </label>
                                <input type="date" id="lastDonation" class="form-control">
                            </div>
                            
                            <div class="form-group">
                                <label for="donationCount">
                                    <i class="fas fa-syringe"></i> রক্তদানের সংখ্যা
                                </label>
                                <input type="number" id="donationCount" class="form-control" placeholder="কতবার রক্ত দিয়েছেন" min="0">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Skills & Interests Tab -->
                <div id="skills" class="tab-content">
                    <h3 class="section-title"><i class="fas fa-graduation-cap"></i> শিক্ষাগত যোগ্যতা</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="education">
                                <i class="fas fa-university"></i> সর্বোচ্চ শিক্ষাগত যোগ্যতা
                            </label>
                            <select id="education" class="form-control">
                                <option value="">-- নির্বাচন করুন --</option>
                                <option value="primary">প্রাথমিক</option>
                                <option value="secondary">মাধ্যমিক</option>
                                <option value="higher_secondary">উচ্চ মাধ্যমিক</option>
                                <option value="diploma">ডিপ্লোমা</option>
                                <option value="bachelor">স্নাতক</option>
                                <option value="masters">স্নাতকোত্তর</option>
                                <option value="phd">পিএইচডি</option>
                                <option value="other">অন্যান্য</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="institution">
                                <i class="fas fa-school"></i> শিক্ষা প্রতিষ্ঠান
                            </label>
                            <input type="text" id="institution" class="form-control" placeholder="শেষ শিক্ষা প্রতিষ্ঠানের নাম">
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="department">
                                <i class="fas fa-book"></i> বিভাগ/বিষয়
                            </label>
                            <input type="text" id="department" class="form-control" placeholder="যেমন: বিজ্ঞান, বাণিজ্য, ইংরেজি">
                        </div>
                        
                        <div class="form-group">
                            <label for="passingYear">
                                <i class="fas fa-calendar-alt"></i> পাসের বছর
                            </label>
                            <input type="number" id="passingYear" class="form-control" placeholder="যেমন: ২০২৩" min="1970" max="2030">
                        </div>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-briefcase"></i> পেশাগত তথ্য
                    </h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="occupation" class="required">
                                <i class="fas fa-user-tie"></i> পেশা
                            </label>
                            <select id="occupation" class="form-control" required>
                                <option value="">-- নির্বাচন করুন --</option>
                                <option value="student">ছাত্র/ছাত্রী</option>
                                <option value="job">চাকুরিজীবী</option>
                                <option value="business">ব্যবসায়ী</option>
                                <option value="farmer">কৃষক</option>
                                <option value="teacher">শিক্ষক</option>
                                <option value="doctor">ডাক্তার</option>
                                <option value="engineer">ইঞ্জিনিয়ার</option>
                                <option value="lawyer">আইনজীবী</option>
                                <option value="housewife">গৃহিণী</option>
                                <option value="unemployed">বেকার</option>
                                <option value="other">অন্যান্য</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="company">
                                <i class="fas fa-building"></i> প্রতিষ্ঠানের নাম
                            </label>
                            <input type="text" id="company" class="form-control" placeholder="চাকুরি/ব্যবসার প্রতিষ্ঠানের নাম">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="designation">
                            <i class="fas fa-id-badge"></i> পদবী
                        </label>
                        <input type="text" id="designation" class="form-control" placeholder="চাকুরির পদবী">
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-star"></i> দক্ষতা ও আগ্রহ
                    </h3>
                    
                    <div class="form-group">
                        <label>
                            <i class="fas fa-laptop-code"></i> বিশেষ দক্ষতা (যদি থাকে)
                        </label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillComputer" value="computer">
                                <label for="skillComputer">কম্পিউটার অপারেটিং</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillMsOffice" value="msoffice">
                                <label for="skillMsOffice">MS Office</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillGraphic" value="graphic">
                                <label for="skillGraphic">গ্রাফিক ডিজাইন</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillWeb" value="web">
                                <label for="skillWeb">ওয়েব ডেভেলপমেন্ট</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillPhotography" value="photography">
                                <label for="skillPhotography">ফটোগ্রাফি</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillVideo" value="video">
                                <label for="skillVideo">ভিডিও এডিটিং</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillLanguage" value="language">
                                <label for="skillLanguage">ভাষাগত দক্ষতা (ইংরেজি/আরবি)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="skillOther">
                                <input type="text" id="skillOtherText" class="form-control" placeholder="অন্যান্য দক্ষতা" style="margin-left: 10px; width: 200px;">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <i class="fas fa-futbol"></i> খেলাধুলা ও শখ
                        </label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="hobbyCricket" value="cricket">
                                <label for="hobbyCricket">ক্রিকেট</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hobbyFootball" value="football">
                                <label for="hobbyFootball">ফুটবল</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hobbyBadminton" value="badminton">
                                <label for="hobbyBadminton">ব্যাডমিন্টন</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hobbyReading" value="reading">
                                <label for="hobbyReading">পড়াশোনা</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hobbyWriting" value="writing">
                                <label for="hobbyWriting">লেখালেখি</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hobbyTravel" value="travel">
                                <label for="hobbyTravel">ভ্রমণ</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hobbyOther">
                                <input type="text" id="hobbyOtherText" class="form-control" placeholder="অন্যান্য শখ" style="margin-left: 10px; width: 200px;">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Emergency Contact Tab -->
                <div id="emergency" class="tab-content">
                    <h3 class="section-title"><i class="fas fa-exclamation-triangle"></i> জরুরী যোগাযোগের তথ্য</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="emergencyName" class="required">
                                <i class="fas fa-user"></i> জরুরী যোগাযোগের নাম
                            </label>
                            <input type="text" id="emergencyName" class="form-control" placeholder="জরুরী অবস্থায় যোগাযোগের ব্যক্তির নাম" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="emergencyRelation" class="required">
                                <i class="fas fa-users"></i> সম্পর্ক
                            </label>
                            <select id="emergencyRelation" class="form-control" required>
                                <option value="">-- নির্বাচন করুন --</option>
                                <option value="father">পিতা</option>
                                <option value="mother">মাতা</option>
                                <option value="brother">ভাই</option>
                                <option value="sister">বোন</option>
                                <option value="spouse">স্বামী/স্ত্রী</option>
                                <option value="son">পুত্র</option>
                                <option value="daughter">কন্যা</option>
                                <option value="uncle">চাচা/মামা</option>
                                <option value="aunt">চাচী/মামী</option>
                                <option value="friend">বন্ধু</option>
                                <option value="other">অন্যান্য</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="emergencyPhone" class="required">
                                <i class="fas fa-phone"></i> জরুরী ফোন নম্বর
                            </label>
                            <div class="phone-input">
                                <span class="prefix">+880</span>
                                <input type="tel" id="emergencyPhone" class="form-control" placeholder="1XXXXXXXXX" maxlength="10" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="emergencyPhone2">
                                <i class="fas fa-phone-alt"></i> বিকল্প ফোন নম্বর
                            </label>
                            <div class="phone-input">
                                <span class="prefix">+880</span>
                                <input type="tel" id="emergencyPhone2" class="form-control" placeholder="1XXXXXXXXX" maxlength="10">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="emergencyAddress">
                            <i class="fas fa-map-marker-alt"></i> জরুরী ঠিকানা
                        </label>
                        <textarea id="emergencyAddress" class="form-control" rows="3" placeholder="জরুরী যোগাযোগের ব্যক্তির ঠিকানা"></textarea>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 30px;">
                        <i class="fas fa-file-contract"></i> চুক্তি ও সম্মতি
                    </h3>
                    
                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="termsAgreement" required>
                            <label for="termsAgreement" class="required">
                                আমি হিজলী দিঘাপাড়া যুব সংঘের নিয়মাবলী মেনে চলতে এবং সংগঠনের সকল সিদ্ধান্ত মেনে নিতে সম্মত আছি।
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="dataAgreement" required>
                            <label for="dataAgreement" class="required">
                                আমি স্বীকার করছি যে আমার প্রদত্ত তথ্যগুলো সঠিক এবং সংগঠন এ তথ্যগুলো সুরক্ষিতভাবে সংরক্ষণ করবে।
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="volunteerAgreement">
                            <label for="volunteerAgreement">
                                আমি সংগঠনের বিভিন্ন স্বেচ্ছাসেবক কার্যক্রমে অংশগ্রহণ করতে ইচ্ছুক।
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="prevBtn">
                        <i class="fas fa-arrow-left"></i> পূর্ববর্তী
                    </button>
                    
                    <button type="button" class="btn btn-primary" id="nextBtn">
                        পরবর্তী <i class="fas fa-arrow-right"></i>
                    </button>
                    
                    <button type="submit" class="btn btn-success" id="submitBtn" style="display: none;">
                        <i class="fas fa-check"></i> প্রোফাইল সম্পূর্ণ করুন
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notificationContainer"></div>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDerc9e0-e7WBnkK2GoinFejp7zszXJ3Jc",
            authDomain: "songho-8ef5c.firebaseapp.com",
            projectId: "songho-8ef5c",
            storageBucket: "songho-8ef5c.appspot.com",
            messagingSenderId: "489031747232",
            appId: "1:489031747232:web:4c1cde63dabaa620ed2bc5",
            measurementId: "G-5NY15E3XJJ"
        };
        
        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();
        
        // Cloudinary Configuration
        const CLOUDINARY_URL = 'https://api.cloudinary.com/v1_1/dy7sxczfo/image/upload';
        const CLOUDINARY_UPLOAD_PRESET = 'songho_preset';
        
        class CompleteProfile {
            constructor() {
                this.currentTab = 'basic';
                this.tabs = ['basic', 'contact', 'health', 'skills', 'emergency'];
                this.formData = {
                    photoUrl: '',
                    basic: {},
                    contact: {},
                    health: {},
                    skills: {},
                    emergency: {}
                };
                this.currentUser = null;
                this.profilePhotoFile = null;
                
                this.init();
            }
            
            async init() {
                // Check authentication
                await this.checkAuth();
                
                // Initialize event listeners
                this.initEventListeners();
                
                // Load existing data if any
                await this.loadExistingData();
                
                // Calculate initial progress
                this.calculateProgress();
                
                console.log('Complete Profile initialized');
            }
            
            async checkAuth() {
                return new Promise((resolve, reject) => {
                    auth.onAuthStateChanged(async (user) => {
                        if (user) {
                            this.currentUser = user;
                            resolve();
                        } else {
                            alert('অনুগ্রহ করে প্রথমে লগইন করুন');
                            window.location.href = 'index.html';
                            reject();
                        }
                    });
                });
            }
            
            initEventListeners() {
                // Tab switching
                document.querySelectorAll('.form-tab').forEach(tab => {
                    tab.addEventListener('click', () => this.switchTab(tab.dataset.tab));
                });
                
                // Photo upload
                document.getElementById('profilePhoto').addEventListener('change', (e) => this.handlePhotoUpload(e));
                document.getElementById('photoPreview').addEventListener('click', () => {
                    document.getElementById('profilePhoto').click();
                });
                
                // Same as permanent address checkbox
                document.getElementById('sameAsPermanent').addEventListener('change', (e) => {
                    this.toggleCurrentAddress(!e.target.checked);
                });
                
                // Blood donor radio buttons
                document.querySelectorAll('input[name="bloodDonor"]').forEach(radio => {
                    radio.addEventListener('change', (e) => {
                        this.toggleBloodDonorInfo(e.target.value === 'yes');
                    });
                });
                
                // Form navigation
                document.getElementById('prevBtn').addEventListener('click', () => this.prevTab());
                document.getElementById('nextBtn').addEventListener('click', () => this.nextTab());
                
                // Form submission
                document.getElementById('profileForm').addEventListener('submit', (e) => this.handleSubmit(e));
                
                // Real-time validation
                this.initRealTimeValidation();
            }
            
            async loadExistingData() {
                try {
                    const userDoc = await db.collection('members').doc(this.currentUser.uid).get();
                    if (userDoc.exists) {
                        const data = userDoc.data();
                        
                        // Load basic info if available
                        if (data.name) {
                            document.getElementById('fullName').value = data.name;
                        }
                        if (data.phone) {
                            const phone = data.phone.replace('+880', '');
                            document.getElementById('mobile1').value = phone;
                        }
                        if (data.email) {
                            document.getElementById('email').value = data.email;
                        }
                        if (data.blood) {
                            document.getElementById('bloodGroup').value = data.blood;
                        }
                        if (data.location) {
                            document.getElementById('village').value = data.location;
                        }
                        if (data.img) {
                            document.getElementById('previewImage').src = data.img;
                            this.formData.photoUrl = data.img;
                        }
                        
                        // Calculate progress based on existing data
                        this.calculateProgress();
                    }
                } catch (error) {
                    console.error('Error loading existing data:', error);
                }
            }
            
            switchTab(tabName) {
                this.currentTab = tabName;
                
                // Update active tab
                document.querySelectorAll('.form-tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.tab === tabName);
                });
                
                // Show active tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.toggle('active', content.id === tabName);
                });
                
                // Update navigation buttons
                this.updateNavigationButtons();
                
                // Save current tab data
                this.saveCurrentTabData();
                
                // Calculate progress
                this.calculateProgress();
            }
            
            prevTab() {
                const currentIndex = this.tabs.indexOf(this.currentTab);
                if (currentIndex > 0) {
                    this.switchTab(this.tabs[currentIndex - 1]);
                }
            }
            
            nextTab() {
                // Validate current tab before proceeding
                if (!this.validateCurrentTab()) {
                    return;
                }
                
                // Save current tab data
                this.saveCurrentTabData();
                
                const currentIndex = this.tabs.indexOf(this.currentTab);
                if (currentIndex < this.tabs.length - 1) {
                    this.switchTab(this.tabs[currentIndex + 1]);
                }
            }
            
            updateNavigationButtons() {
                const currentIndex = this.tabs.indexOf(this.currentTab);
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const submitBtn = document.getElementById('submitBtn');
                
                // Previous button
                if (currentIndex === 0) {
                    prevBtn.style.display = 'none';
                } else {
                    prevBtn.style.display = 'inline-flex';
                }
                
                // Next/Submit button
                if (currentIndex === this.tabs.length - 1) {
                    nextBtn.style.display = 'none';
                    submitBtn.style.display = 'inline-flex';
                } else {
                    nextBtn.style.display = 'inline-flex';
                    submitBtn.style.display = 'none';
                }
            }
            
            validateCurrentTab() {
                const tabId = this.currentTab;
                let isValid = true;
                
                switch(tabId) {
                    case 'basic':
                        isValid = this.validateBasicTab();
                        break;
                    case 'contact':
                        isValid = this.validateContactTab();
                        break;
                    case 'health':
                        isValid = this.validateHealthTab();
                        break;
                    case 'emergency':
                        isValid = this.validateEmergencyTab();
                        break;
                }
                
                return isValid;
            }
            
            validateBasicTab() {
                const fullName = document.getElementById('fullName').value.trim();
                const fatherName = document.getElementById('fatherName').value.trim();
                const motherName = document.getElementById('motherName').value.trim();
                const dob = document.getElementById('dob').value;
                const nid = document.getElementById('nid').value.trim();
                const gender = document.getElementById('gender').value;
                
                let errors = [];
                
                if (!fullName) errors.push('পুরো নাম দিন');
                if (!fatherName) errors.push('পিতার নাম দিন');
                if (!motherName) errors.push('মাতার নাম দিন');
                if (!dob) errors.push('জন্ম তারিখ নির্বাচন করুন');
                if (!nid) errors.push('NID নম্বর দিন');
                if (!gender) errors.push('লিঙ্গ নির্বাচন করুন');
                
                // Age validation
                if (dob) {
                    const birthDate = new Date(dob);
                    const today = new Date();
                    let age = today.getFullYear() - birthDate.getFullYear();
                    
                    // Adjust for month/day
                    if (today.getMonth() < birthDate.getMonth() || 
                        (today.getMonth() === birthDate.getMonth() && today.getDate() < birthDate.getDate())) {
                        age--;
                    }
                    
                    if (age < 18) {
                        errors.push('সদস্য হতে বয়স কমপক্ষে ১৮ বছর হতে হবে');
                    }
                }
                
                // NID validation
                if (nid && !/^\d{10,17}$/.test(nid)) {
                    errors.push('সঠিক NID নম্বর দিন (১০-১৭ ডিজিট)');
                }
                
                if (errors.length > 0) {
                    this.showNotification(errors.join('<br>'), 'error');
                    return false;
                }
                
                return true;
            }
            
            validateContactTab() {
                const mobile1 = document.getElementById('mobile1').value.trim();
                const village = document.getElementById('village').value.trim();
                const postOffice = document.getElementById('postOffice').value.trim();
                const upazila = document.getElementById('upazila').value.trim();
                const district = document.getElementById('district').value.trim();
                
                let errors = [];
                
                // Phone validation
                if (!mobile1) {
                    errors.push('প্রাথমিক মোবাইল নম্বর দিন');
                } else if (!/^01[3-9]\d{8}$/.test('0' + mobile1)) {
                    errors.push('সঠিক মোবাইল নম্বর দিন (01 দিয়ে শুরু করে 11 ডিজিট)');
                }
                
                // Address validation
                if (!village) errors.push('গ্রাম/মহল্লা দিন');
                if (!postOffice) errors.push('ডাকঘর দিন');
                if (!upazila) errors.push('উপজেলা দিন');
                if (!district) errors.push('জেলা দিন');
                
                if (errors.length > 0) {
                    this.showNotification(errors.join('<br>'), 'error');
                    return false;
                }
                
                return true;
            }
            
            validateHealthTab() {
                const bloodGroup = document.getElementById('bloodGroup').value;
                
                if (!bloodGroup) {
                    this.showNotification('রক্তের গ্রুপ নির্বাচন করুন', 'error');
                    return false;
                }
                
                return true;
            }
            
            validateEmergencyTab() {
                const emergencyName = document.getElementById('emergencyName').value.trim();
                const emergencyRelation = document.getElementById('emergencyRelation').value;
                const emergencyPhone = document.getElementById('emergencyPhone').value.trim();
                const termsAgreement = document.getElementById('termsAgreement').checked;
                const dataAgreement = document.getElementById('dataAgreement').checked;
                
                let errors = [];
                
                if (!emergencyName) errors.push('জরুরী যোগাযোগের নাম দিন');
                if (!emergencyRelation) errors.push('সম্পর্ক নির্বাচন করুন');
                if (!emergencyPhone) {
                    errors.push('জরুরী ফোন নম্বর দিন');
                } else if (!/^01[3-9]\d{8}$/.test('0' + emergencyPhone)) {
                    errors.push('সঠিক জরুরী ফোন নম্বর দিন');
                }
                if (!termsAgreement) errors.push('সংগঠনের নিয়মাবলীতে সম্মতি দিন');
                if (!dataAgreement) errors.push('তথ্য সুরক্ষা চুক্তিতে সম্মতি দিন');
                
                if (errors.length > 0) {
                    this.showNotification(errors.join('<br>'), 'error');
                    return false;
                }
                
                return true;
            }
            
            saveCurrentTabData() {
                const tabId = this.currentTab;
                
                switch(tabId) {
                    case 'basic':
                        this.saveBasicData();
                        break;
                    case 'contact':
                        this.saveContactData();
                        break;
                    case 'health':
                        this.saveHealthData();
                        break;
                    case 'skills':
                        this.saveSkillsData();
                        break;
                    case 'emergency':
                        this.saveEmergencyData();
                        break;
                }
                
                // Update progress
                this.calculateProgress();
            }
            
            saveBasicData() {
                this.formData.basic = {
                    fullName: document.getElementById('fullName').value.trim(),
                    nickname: document.getElementById('nickname').value.trim(),
                    fatherName: document.getElementById('fatherName').value.trim(),
                    motherName: document.getElementById('motherName').value.trim(),
                    dob: document.getElementById('dob').value,
                    birthPlace: document.getElementById('birthPlace').value.trim(),
                    nid: document.getElementById('nid').value.trim(),
                    gender: document.getElementById('gender').value
                };
            }
            
            saveContactData() {
                this.formData.contact = {
                    mobile1: document.getElementById('mobile1').value.trim(),
                    mobile2: document.getElementById('mobile2').value.trim(),
                    email: document.getElementById('email').value.trim(),
                    facebook: document.getElementById('facebook').value.trim(),
                    village: document.getElementById('village').value.trim(),
                    postOffice: document.getElementById('postOffice').value.trim(),
                    upazila: document.getElementById('upazila').value.trim(),
                    district: document.getElementById('district').value.trim(),
                    sameAsPermanent: document.getElementById('sameAsPermanent').checked,
                    currentVillage: document.getElementById('currentVillage').value.trim(),
                    currentDistrict: document.getElementById('currentDistrict').value.trim()
                };
            }
            
            saveHealthData() {
                // Get health issues
                const healthIssues = [];
                if (document.getElementById('healthDiabetes').checked) healthIssues.push('diabetes');
                if (document.getElementById('healthHeart').checked) healthIssues.push('heart');
                if (document.getElementById('healthPressure').checked) healthIssues.push('pressure');
                if (document.getElementById('healthAsthma').checked) healthIssues.push('asthma');
                if (document.getElementById('healthKidney').checked) healthIssues.push('kidney');
                if (document.getElementById('healthOther').checked && document.getElementById('healthOtherText').value) {
                    healthIssues.push(document.getElementById('healthOtherText').value.trim());
                }
                
                this.formData.health = {
                    bloodGroup: document.getElementById('bloodGroup').value,
                    height: document.getElementById('height').value,
                    weight: document.getElementById('weight').value,
                    disability: document.getElementById('disability').value,
                    healthIssues: healthIssues,
                    bloodDonor: document.querySelector('input[name="bloodDonor"]:checked').value,
                    lastDonation: document.getElementById('lastDonation').value,
                    donationCount: document.getElementById('donationCount').value
                };
            }
            
            saveSkillsData() {
                // Get skills
                const skills = [];
                if (document.getElementById('skillComputer').checked) skills.push('computer');
                if (document.getElementById('skillMsOffice').checked) skills.push('msoffice');
                if (document.getElementById('skillGraphic').checked) skills.push('graphic');
                if (document.getElementById('skillWeb').checked) skills.push('web');
                if (document.getElementById('skillPhotography').checked) skills.push('photography');
                if (document.getElementById('skillVideo').checked) skills.push('video');
                if (document.getElementById('skillLanguage').checked) skills.push('language');
                if (document.getElementById('skillOther').checked && document.getElementById('skillOtherText').value) {
                    skills.push(document.getElementById('skillOtherText').value.trim());
                }
                
                // Get hobbies
                const hobbies = [];
                if (document.getElementById('hobbyCricket').checked) hobbies.push('cricket');
                if (document.getElementById('hobbyFootball').checked) hobbies.push('football');
                if (document.getElementById('hobbyBadminton').checked) hobbies.push('badminton');
                if (document.getElementById('hobbyReading').checked) hobbies.push('reading');
                if (document.getElementById('hobbyWriting').checked) hobbies.push('writing');
                if (document.getElementById('hobbyTravel').checked) hobbies.push('travel');
                if (document.getElementById('hobbyOther').checked && document.getElementById('hobbyOtherText').value) {
                    hobbies.push(document.getElementById('hobbyOtherText').value.trim());
                }
                
                this.formData.skills = {
                    education: document.getElementById('education').value,
                    institution: document.getElementById('institution').value.trim(),
                    department: document.getElementById('department').value.trim(),
                    passingYear: document.getElementById('passingYear').value,
                    occupation: document.getElementById('occupation').value,
                    company: document.getElementById('company').value.trim(),
                    designation: document.getElementById('designation').value.trim(),
                    skills: skills,
                    hobbies: hobbies
                };
            }
            
            saveEmergencyData() {
                this.formData.emergency = {
                    emergencyName: document.getElementById('emergencyName').value.trim(),
                    emergencyRelation: document.getElementById('emergencyRelation').value,
                    emergencyPhone: document.getElementById('emergencyPhone').value.trim(),
                    emergencyPhone2: document.getElementById('emergencyPhone2').value.trim(),
                    emergencyAddress: document.getElementById('emergencyAddress').value.trim(),
                    termsAgreement: document.getElementById('termsAgreement').checked,
                    dataAgreement: document.getElementById('dataAgreement').checked,
                    volunteerAgreement: document.getElementById('volunteerAgreement').checked
                };
            }
            
            calculateProgress() {
                let filledFields = 0;
                let totalRequiredFields = 0;
                
                // Calculate based on current tab data
                Object.values(this.formData).forEach(section => {
                    Object.values(section).forEach(value => {
                        if (value !== undefined && value !== null && value !== '') {
                            filledFields++;
                        }
                    });
                    totalRequiredFields += Object.keys(section).length;
                });
                
                // Add photo to calculation
                if (this.formData.photoUrl) {
                    filledFields++;
                }
                totalRequiredFields++;
                
                // Calculate percentage
                const percentage = totalRequiredFields > 0 ? Math.round((filledFields / totalRequiredFields) * 100) : 0;
                
                // Update UI
                document.getElementById('progressFill').style.width = `${percentage}%`;
                document.getElementById('progressPercentage').textContent = `${percentage}%`;
                
                return percentage;
            }
            
            async handlePhotoUpload(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                // Validate file
                if (!file.type.startsWith('image/')) {
                    this.showNotification('অনুগ্রহ করে একটি ছবি ফাইল নির্বাচন করুন', 'error');
                    return;
                }
                
                if (file.size > 2 * 1024 * 1024) { // 2MB limit
                    this.showNotification('ছবির সাইজ 2MB এর কম হতে হবে', 'error');
                    return;
                }
                
                // Show preview
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('previewImage').src = e.target.result;
                };
                reader.readAsDataURL(file);
                
                // Store file for later upload
                this.profilePhotoFile = file;
                
                // Show upload status
                this.showNotification('ছবি সিলেক্ট করা হয়েছে। প্রোফাইল সেভ করলে আপলোড হবে।', 'success');
            }
            
            async uploadProfilePhoto() {
                if (!this.profilePhotoFile) return null;
                
                try {
                    this.showNotification('ছবি আপলোড হচ্ছে...', 'info');
                    
                    const formData = new FormData();
                    formData.append('file', this.profilePhotoFile);
                    formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
                    
                    const response = await fetch(CLOUDINARY_URL, {
                        method: 'POST',
                        body: formData
                    });
                    
                    if (!response.ok) {
                        throw new Error('ছবি আপলোড ব্যর্থ');
                    }
                    
                    const data = await response.json();
                    this.formData.photoUrl = data.secure_url;
                    
                    this.showNotification('ছবি সফলভাবে আপলোড হয়েছে', 'success');
                    return data.secure_url;
                    
                } catch (error) {
                    console.error('Error uploading photo:', error);
                    this.showNotification('ছবি আপলোড ব্যর্থ: ' + error.message, 'error');
                    return null;
                }
            }
            
            toggleCurrentAddress(show) {
                const section = document.getElementById('currentAddressSection');
                const inputs = section.querySelectorAll('input');
                
                if (show) {
                    section.style.display = 'block';
                    inputs.forEach(input => input.disabled = false);
                } else {
                    section.style.display = 'none';
                    inputs.forEach(input => {
                        input.disabled = true;
                        input.value = '';
                    });
                }
            }
            
            toggleBloodDonorInfo(show) {
                const infoSection = document.getElementById('bloodDonorInfo');
                const inputs = infoSection.querySelectorAll('input');
                
                if (show) {
                    infoSection.style.display = 'block';
                    inputs.forEach(input => input.disabled = false);
                } else {
                    infoSection.style.display = 'none';
                    inputs.forEach(input => {
                        input.disabled = true;
                        input.value = '';
                    });
                }
            }
            
            initRealTimeValidation() {
                // Phone number validation
                document.getElementById('mobile1').addEventListener('input', (e) => {
                    this.validatePhoneNumber(e.target.value, 'mobile1Error');
                });
                
                document.getElementById('emergencyPhone').addEventListener('input', (e) => {
                    this.validatePhoneNumber(e.target.value, 'emergencyPhoneError');
                });
                
                // NID validation
                document.getElementById('nid').addEventListener('input', (e) => {
                    const value = e.target.value.replace(/\D/g, '');
                    e.target.value = value;
                });
            }
            
            validatePhoneNumber(phone, errorElementId) {
                const errorElement = document.getElementById(errorElementId);
                if (!phone) {
                    errorElement.style.display = 'none';
                    return true;
                }
                
                const isValid = /^01[3-9]\d{8}$/.test('0' + phone);
                errorElement.style.display = isValid ? 'none' : 'block';
                return isValid;
            }
            
            async handleSubmit(event) {
                event.preventDefault();
                
                // Validate all tabs
                if (!this.validateAllTabs()) {
                    this.showNotification('অনুগ্রহ করে সব Required তথ্য পূরণ করুন', 'error');
                    return;
                }
                
                try {
                    // Show loading state
                    const submitBtn = document.getElementById('submitBtn');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> সংরক্ষণ করা হচ্ছে...';
                    submitBtn.disabled = true;
                    
                    // Upload profile photo if exists
                    let photoUrl = this.formData.photoUrl;
                    if (this.profilePhotoFile && !photoUrl) {
                        photoUrl = await this.uploadProfilePhoto();
                        if (!photoUrl) {
                            throw new Error('ছবি আপলোড ব্যর্থ');
                        }
                    }
                    
                    // Prepare complete member data
                    const memberData = {
                        // Basic Info
                        name: this.formData.basic.fullName,
                        nickname: this.formData.basic.nickname || null,
                        fatherName: this.formData.basic.fatherName,
                        motherName: this.formData.basic.motherName,
                        dob: this.formData.basic.dob,
                        birthPlace: this.formData.basic.birthPlace || null,
                        nid: this.formData.basic.nid,
                        gender: this.formData.basic.gender,
                        
                        // Contact Info
                        phone: '+880' + this.formData.contact.mobile1,
                        phone2: this.formData.contact.mobile2 ? '+880' + this.formData.contact.mobile2 : null,
                        email: this.formData.contact.email || null,
                        facebook: this.formData.contact.facebook || null,
                        
                        // Permanent Address
                        village: this.formData.contact.village,
                        postOffice: this.formData.contact.postOffice,
                        upazila: this.formData.contact.upazila,
                        district: this.formData.contact.district,
                        location: `${this.formData.contact.village}, ${this.formData.contact.upazila}, ${this.formData.contact.district}`,
                        
                        // Current Address
                        currentVillage: this.formData.contact.currentVillage || null,
                        currentDistrict: this.formData.contact.currentDistrict || null,
                        currentAddress: this.formData.contact.sameAsPermanent ? 
                            `${this.formData.contact.village}, ${this.formData.contact.upazila}, ${this.formData.contact.district}` :
                            (this.formData.contact.currentVillage ? 
                                `${this.formData.contact.currentVillage}, ${this.formData.contact.currentDistrict}` : null),
                        
                        // Health Info
                        blood: this.formData.health.bloodGroup,
                        height: this.formData.health.height || null,
                        weight: this.formData.health.weight || null,
                        disability: this.formData.health.disability || null,
                        healthIssues: this.formData.health.healthIssues,
                        bloodDonor: this.formData.health.bloodDonor,
                        lastDonationDate: this.formData.health.lastDonation || null,
                        donationCount: this.formData.health.donationCount || 0,
                        
                        // Skills & Education
                        education: this.formData.skills.education || null,
                        institution: this.formData.skills.institution || null,
                        department: this.formData.skills.department || null,
                        passingYear: this.formData.skills.passingYear || null,
                        occupation: this.formData.skills.occupation,
                        company: this.formData.skills.company || null,
                        designation: this.formData.skills.designation || null,
                        skills: this.formData.skills.skills,
                        hobbies: this.formData.skills.hobbies,
                        
                        // Emergency Contact
                        emergencyName: this.formData.emergency.emergencyName,
                        emergencyRelation: this.formData.emergency.emergencyRelation,
                        emergencyPhone: '+880' + this.formData.emergency.emergencyPhone,
                        emergencyPhone2: this.formData.emergency.emergencyPhone2 ? '+880' + this.formData.emergency.emergencyPhone2 : null,
                        emergencyAddress: this.formData.emergency.emergencyAddress || null,
                        
                        // Agreements
                        termsAgreed: this.formData.emergency.termsAgreement,
                        dataAgreed: this.formData.emergency.dataAgreement,
                        volunteerAgreed: this.formData.emergency.volunteerAgreement || false,
                        
                        // System Fields
                        img: photoUrl || 'https://i.ibb.co/6y4g08x/default-avatar.png',
                        uid: this.currentUser.uid,
                        email: this.currentUser.email || null,
                        isGuest: false,
                        status: 'active',
                        memberSince: new Date().toISOString(),
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        
                        // Additional fields
                        membershipId: this.generateMembershipId(),
                        profileCompleted: true,
                        profileCompletionDate: new Date().toISOString()
                    };
                    
                    // Save to Firestore
                    await db.collection('members').doc(this.currentUser.uid).set(memberData, { merge: true });
                    
                    // Show success message
                    this.showNotification('প্রোফাইল সফলভাবে সংরক্ষণ করা হয়েছে!', 'success');
                    
                    // Redirect to user page after 2 seconds
                    setTimeout(() => {
                        window.location.href = 'user.html';
                    }, 2000);
                    
                } catch (error) {
                    console.error('Error saving profile:', error);
                    this.showNotification('প্রোফাইল সংরক্ষণ ব্যর্থ: ' + error.message, 'error');
                    
                    // Reset button state
                    const submitBtn = document.getElementById('submitBtn');
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
            }
            
            validateAllTabs() {
                return this.validateBasicTab() && 
                       this.validateContactTab() && 
                       this.validateHealthTab() && 
                       this.validateEmergencyTab();
            }
            
            generateMembershipId() {
                // Generate a unique membership ID
                const timestamp = Date.now().toString().slice(-6);
                const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
                return `HDYS-${timestamp}${random}`;
            }
            
            showNotification(message, type = 'info') {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                `;
                
                container.appendChild(notification);
                
                // Remove after 5 seconds
                setTimeout(() => {
                    notification.style.animation = 'slideInRight 0.3s ease reverse';
                    setTimeout(() => notification.remove(), 300);
                }, 5000);
            }
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.completeProfileApp = new CompleteProfile();
        });
    </script>
</body>
</html>